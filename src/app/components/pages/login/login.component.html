<app-headerthree></app-headerthree>
<!-- Login Form Start -->
<div class="section">
    <div class="imgs-wrapper">
        <img src="assets/img/veg/11.png" alt="veg" class="d-none d-lg-block">
        <img src="assets/img/prods/3.png" alt="veg" class="d-none d-lg-block">
    </div>
    <div class="container">
        <div class="auth-wrapper">
            <div class="auth-description bg-cover bg-center dark-overlay dark-overlay-2" style="background-image: url('assets/img/auth.jpg')">
                <div class="auth-description-inner">
                    <i class="flaticon-chili"></i>
                    <h2>Bienvenue à nouveau !</h2>
                    <p>Connectez-vous pour accéder à votre compte et suivre vos commandes.</p>
                </div>
            </div>
            <div class="auth-form">
                <h2>Connexion</h2>
                
                <!-- Alerte d'erreur de connexion -->
                <div *ngIf="loginError" class="alert alert-danger">
                    {{ loginError }}
                </div>
                
                <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
                    <!-- Email -->
                    <div class="form-group">
                        <input type="email" 
                              class="form-control form-control-light" 
                              placeholder="Email" 
                              formControlName="email">
                        <div *ngIf="f.email.touched && f.email.errors" class="text-danger mt-1 small">
                            <div *ngIf="f.email.errors.required">Email est requis</div>
                            <div *ngIf="f.email.errors.email">Email n'est pas valide</div>
                        </div>
                    </div>
                    
                    <!-- Mot de passe -->
                    <div class="form-group">
                        <input type="password" 
                              class="form-control form-control-light" 
                              placeholder="Mot de passe" 
                              formControlName="password">
                        <div *ngIf="f.password.touched && f.password.errors" class="text-danger mt-1 small">
                            <div *ngIf="f.password.errors.required">Mot de passe est requis</div>
                            <div *ngIf="f.password.errors.minlength">Le mot de passe doit comporter au moins 6 caractères</div>
                        </div>
                    </div>
                    
                    <a (click)="openForgotPasswordModal()" style="cursor: pointer;">Mot de passe oublié ?</a>
                    
                    <!-- Bouton de connexion avec état de chargement -->
                    <button type="submit" 
                           class="btn-custom primary" 
                           [disabled]="isSubmitting || loginForm.invalid">
                        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span>
                        {{ isSubmitting ? 'Connexion en cours...' : 'Se connecter' }}
                    </button>
                    
                    <div class="auth-seperator">
                        <span>OU</span>
                    </div>
                    
                    <div class="social-login">
                        <button type="button" class="ct-social-login facebook"><i class="fab fa-facebook-f"></i> Continuer avec Facebook </button>
                        <button type="button" class="ct-social-login google"><i class="fab fa-google"></i> Continuer avec Google</button>
                    </div>
                    
                    <p>Vous n'avez pas de compte ? <a routerLink="/register">Créez-en un</a> </p>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- Login Form End -->
<app-footer [layout]="classname" [logo]="ftlogo"></app-footer>